@{
    ViewData["Title"] = "Теми підготовки";
    var algebra = ViewBag.Algebra as List<NMT.Models.Section>;
    var geometry = ViewBag.Geometry as List<NMT.Models.Section>;
}

<div class="container">

    <div class="row mb-4">
        <div class="col text-end">
            <a asp-controller="Section" asp-action="Create" class="btn btn-outline-primary me-2">
                ➕ Додати розділ
            </a>
            <a asp-controller="Topic" asp-action="Create" class="btn btn-outline-success">
                ➕ Додати тему
            </a>
        </div>
    </div>

    <div class="row">

        <div class="col-md-6">
            <h2 class="text-center text-primary mb-4">Алгебра</h2>
            @foreach (var sec in algebra)
            {
                var collapseId = "algebra" + sec.Id;
                <div class="mb-3">
                    <div class="d-flex justify-content-between align-items-center bg-primary text-white rounded px-3 py-2">
                        <a asp-controller="Section" asp-action="Details" asp-route-id="@sec.Id"
                           class="text-white text-decoration-none fw-bold"
                           style="font-size: 1.25rem;">
                            @sec.Name
                        </a>

                        <button class="btn btn-sm btn-light text-dark py-1 px-2"
                                type="button"
                                data-bs-toggle="collapse" data-bs-target="#@collapseId"
                                aria-expanded="false">
                            <i class="bi bi-caret-down-fill"></i>
                        </button>
                    </div>

                    <div class="collapse mt-2" id="@collapseId">
                        @foreach (var topic in sec.Topics)
                        {
                            <div class="card mb-2 shadow-sm">
                                <div class="card-body d-flex justify-content-between align-items-center">
                                    <span>@topic.Name</span>
                                    <div class="d-flex align-items-center gap-2">
                                        <a href="/Topic/Details/@topic.Id" class="btn btn-sm btn-outline-primary me-2">Перейти</a>

                                        <a asp-controller="Topic" asp-action="Edit" asp-route-id="@topic.Id"
                                           class="btn p-0 text-warning btn-edit"
                                           title="Редагувати">
                                            <i class="bi bi-pencil"></i>
                                        </a>

                                        <form asp-controller="Topic" asp-action="Delete" asp-route-id="@topic.Id"
                                              method="post" onsubmit="return confirm('Ви впевнені?');" class="d-inline">
                                            <button type="submit" class="btn p-0 text-danger btn-delete" title="Видалити">
                                                <span class="bi bi-trash3"></span>
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        }

                    </div>
                </div>

            }
        </div>

        <div class="col-md-6">
            <h2 class="text-center text-success mb-4">Геометрія</h2>
            @foreach (var sec in geometry)
            {
                var collapseId = "geometry" + sec.Id;
                <div class="mb-3">
                    <div class="d-flex justify-content-between align-items-center bg-success text-white rounded px-3 py-2">
                        <a asp-controller="Section" asp-action="Details" asp-route-id="@sec.Id"
                           class="text-white text-decoration-none fw-bold"
                           style="font-size: 1.25rem;">
                            @sec.Name
                        </a>

                        <button class="btn btn-sm btn-light text-dark py-1 px-2"
                                type="button"
                                data-bs-toggle="collapse" data-bs-target="#@collapseId"
                                aria-expanded="false">
                            <i class="bi bi-caret-down-fill"></i>
                        </button>
                    </div>

                    <div class="collapse mt-2" id="@collapseId">
                        @foreach (var topic in sec.Topics)
                        {
                            <div class="card mb-2 shadow-sm">
                                <div class="card-body d-flex justify-content-between align-items-center">
                                    <span>@topic.Name</span>
                                    <div class="d-flex align-items-center gap-2">
                                        <a href="/Topic/Details/@topic.Id" class="btn btn-sm btn-outline-primary me-2">Перейти</a>

                                        <button type="button"
                                                asp-controller="Topic" asp-action="Edit" asp-route-id="@topic.Id"
                                                class="btn p-0 text-warning btn-edit"
                                                title="Редагувати">
                                            <span class="bi bi-pencil"></span>
                                        </button>

                                        <form asp-controller="Topic" asp-action="Delete" asp-route-id="@topic.Id"
                                              method="post" onsubmit="return confirm('Ви впевнені?');" class="d-inline">
                                            <button type="submit" class="btn p-0 text-danger btn-delete" title="Видалити">
                                                <span class="bi bi-trash3"></span>
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        }

                    </div>
                </div>

            }
        </div>

    </div>
</div>
